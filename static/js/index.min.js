/*!
 * KusamaProject.js v1.0.0
 * (c) 2020 MathWallet
 */
$(function(){var vue=new Vue({el:'#app',data(){return{isSideShow:false,isMobile:false,isBack:false,categories:[],projectList:[],mapping:[],tags:[],selectedTag:{ID:0,title:"ALL"},selectedCategory:{ID:0,title:"ALL"},searchInfo:'',modalProject:null}},methods:{toggleSidebar(n=0){if(window.innerWidth<=768){this.isMobile=true;if(n==1){this.isSideShow=true;}else{this.isSideShow=false}}else{this.isMobile=false;this.isSideShow=true}},setMainHeight(){if(window.innerWidth>768){$('.main').height($(window).height()-$('header').outerHeight()-32)}},init(){this.getMapping();this.getCategories();this.getTags();this.getList()},getMapping(){this.mapping=mapping&&mapping.length>0&&mapping.filter(function(v){return v.verified})||[]},getCategories(){this.categories=[{ID:0,title:'ALL'}].concat(categories.map(function(v,i){return{ID:i+1,title:v}}))},getTags(){this.tags=[{ID:0,title:'ALL'}].concat(tags.map(function(v,i){return{ID:i+1,title:v}}))},switchCategory(item){this.selectedCategory=item;this.searchInfo='';this.getList();this.toggleSidebar()},switchTag(tag){this.selectedTag=tag;this.getList()},getList(){let cate=this.selectedCategory.ID?this.selectedCategory.title.toLowerCase():'';let tag=this.selectedTag.ID?this.selectedTag.title:'';let list=this.mapping;if(cate){list=list.filter(function(v){return v.category.toLowerCase()==cate})}if(tag){list=list.filter(function(v){return v.tags.indexOf(tag)>-1})}this.projectList=list},searchProject(){$('.main').scrollTop(0);let searchInfo=this.searchInfo.trim().toLowerCase();if(searchInfo){this.projectList=this.mapping.filter(function(v){return v.title.toLowerCase().indexOf(searchInfo)>-1})}else{this.getList()}},emptySearch(){this.searchInfo='';this.getList()},goTop(){$('.main').finish().animate({"scrollTop":"0px"},900)},openModal(project){this.modalProject=project;$('body').addClass('modal-open')},closeModal(){this.modalProject=null;$('body').removeClass('modal-open')},openLink(link,type){if(type=='email'){window.location.href='mailto:'+link}else{window.open(link,'_blank')}}},created(){this.toggleSidebar();this.init();this.debouncedSearchProject=_.debounce(this.searchProject,500)},mounted(){var _this=this;this.setMainHeight();window.onresize=function(){_this.setMainHeight();_this.toggleSidebar()}}})})
